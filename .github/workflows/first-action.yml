name: Generate System Report

# TRIGGER: Runs when you push code OR when you click the button manually
on:
  push:
  workflow_dispatch:

jobs:
  generate-report:
    runs-on: ubuntu-latest

    steps:
      # Step 1: Download your repository code
      - name: Checkout Code
        uses: actions/checkout@v4

      # Step 2: Run Linux commands to gather info and save to a text file
      - name: Create System Info File
        run: |
          echo "--- GITHUB ACTIONS REPORT ---" > report.txt
          echo "Date: $(date)" >> report.txt
          echo "" >> report.txt
          echo "--- OPERATING SYSTEM ---" >> report.txt
          cat /etc/os-release >> report.txt
          echo "" >> report.txt
          echo "--- DISK SPACE ---" >> report.txt
          df -h >> report.txt
          
      # Step 3: Verify the file exists (prints content to the logs)
      - name: Read File to Console
        run: cat report.txt

      # Step 4: Upload the file so you can download it later
      - name: Upload Artifact
        uses: actions/upload-artifact@v4
        with:
          name: my-server-report
          path: report.txt
